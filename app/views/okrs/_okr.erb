<% unless @okr.nil? %>
    <div class="right options">
      <% if can? :manage, @okr %>
          <a href="#" data-options="align:left" data-dropdown="drop1" class="dropdown right">
            <div class="icon settings-link"></div>
          </a>
          <ul id="drop1" data-dropdown-content class="f-dropdown">
            <li>
              <%= link_to "Edit", edit_user_okr_path(@user,@okr) %>
            </li>
            <li>
              <%= link_to "Delete", okr_path(@okr), :method => :delete,:confirm=>'Are you sure you want to archive this project?' %>
            </li>
          </ul>
      <% end %>
    </div>
    <br/>
    <table class="table">
      <thead>
      <tr>
        <th width="100">Sl no</th>
        <th width="450">Objective</th>
        <th width="450">Key results</th>
      </tr>
      </thead>
      <tbody>
      <% @okr.objectives.each_with_index do |o, i| %>
          <tr class="objective">
            <td rowspan="<%= o.key_results.count %>"><%= i+1 %></td>
            <td rowspan="<%= o.key_results.count %>"><%= o.name %></td>
            <!--<div class="key-results">-->
            <% o.key_results.each_with_index do |kr, j| %>
                <td><%= "#{j+1}. #{kr.name}" %></td>
                <% unless j ==0 %>
                    </tr>
                <% end %>
                <tr>
            <% end %>
            </tr>
            <!--</div>-->
            </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

<script type="text/javascript">
    $('.okr.card').removeClass('active')
    $('.okr-<%= @okr.try(&:id) %>').addClass('active')
</script>
